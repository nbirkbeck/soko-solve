<html>
  <head>
  <style>
   #canvas {
     width: 288px;
     height: 480px;
   }
  </style>
  <script src="constants.js"></script>
  <script src="heap.js"></script>
  <script src="queue.js"></script>
  <script src="heuristic.js"></script>
  <script src="state.js"></script>
  <script src="box_pusher.js"></script>
  </head>
  <body>
    <canvas id="canvas" width='288' height='480'>
    </canvas>

    <script>
      var heap = new Heap(function(x) {return x;});
      heap.push("Neil", 1);
      heap.push("Leslie", 10);
      heap.updateIfBetter("Leslie", 0);
      console.log(heap.pop());

      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');
      var level = new Level(
        '    #####   \n' + 
        '    #   #   \n' +
        ' ####   #   \n' +
        ' # xx b #   \n' +
        ' #   b  #   \n' +
        ' #   *  #   \n' +
        ' ########   \n');
      level1 = new Level(
        ' ######   \n' + 
        ' #    ##  \n' +
        ' # b b ## \n' + 
        ' ## bb  # \n' +
        '  # #   # \n' +
        '  # ## ## \n' +
        '  #  x x# \n' +
        '  # *x x# \n' +
        '  #  #### \n' +
        '  ####    \n');
      var state = level.getInitialState();
      level.draw(state, context);
      
      document.addEventListener('keypress', function(event) {
       if (event.keyCode == 119) {
         level.move(state, constants.Directions.UP);
       }
       if (event.keyCode == 97) {
         level.move(state, constants.Directions.LEFT);
       }
       if (event.keyCode == 100) {
         level.move(state, constants.Directions.RIGHT);
       }
       if (event.keyCode == 115) {
         level.move(state, constants.Directions.DOWN);
       }
       if (event.keyCode == 32) {
         state = level.solve(state);
       }
       level.draw(state, context);
      });
    </script>
  </body>
</html>
